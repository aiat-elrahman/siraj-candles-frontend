(function(f,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],l):(f=typeof globalThis<"u"?globalThis:f||self,l(f.AdminProductUploader={},f.React))})(this,function(f,l){"use strict";var O={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q=l,Y=Symbol.for("react.element"),q=Symbol.for("react.fragment"),$=Object.prototype.hasOwnProperty,ee=Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,se={key:!0,ref:!0,__self:!0,__source:!0};function z(t,o,m){var i,p={},n=null,y=null;m!==void 0&&(n=""+m),o.key!==void 0&&(n=""+o.key),o.ref!==void 0&&(y=o.ref);for(i in o)$.call(o,i)&&!se.hasOwnProperty(i)&&(p[i]=o[i]);if(t&&t.defaultProps)for(i in o=t.defaultProps,o)p[i]===void 0&&(p[i]=o[i]);return{$$typeof:Y,type:t,key:n,ref:y,props:p,_owner:ee.current}}C.Fragment=q,C.jsx=z,C.jsxs=z,O.exports=C;var e=O.exports;/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M=(...t)=>t.filter((o,m,i)=>!!o&&i.indexOf(o)===m).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var re={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=l.forwardRef(({color:t="currentColor",size:o=24,strokeWidth:m=2,absoluteStrokeWidth:i,className:p="",children:n,iconNode:y,...P},I)=>l.createElement("svg",{ref:I,...re,width:o,height:o,stroke:t,strokeWidth:i?Number(m)*24/Number(o):m,className:M("lucide",p),...P},[...y.map(([_,k])=>l.createElement(_,k)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=(t,o)=>{const m=l.forwardRef(({className:i,...p},n)=>l.createElement(ae,{ref:n,iconNode:o,className:M(`lucide-${te(t)}`,i),...p}));return m.displayName=`${t}`,m};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=b("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=b("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=b("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=b("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=b("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=b("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=b("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=b("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),w="https://siraj-backend.onrender.com",S={subProductName:"Item",size:"",allowedScents:["Vanilla Cookie"]},F={_id:null,productType:"Single",category:"",price_egp:0,stock:0,status:"Active",featured:!1,name_en:"",description_en:"",scents:[],size:"",formattedDescription:"",burnTime:"",wickType:"",coverageSpace:"",bundleName:"",bundleDescription:"",bundleItems:[{...S,subProductName:"Big Jar Candle 1"},{...S,subProductName:"Big Jar Candle 2"},{...S,subProductName:"Wax Freshener"}],selectedFiles:[],imagePaths:[]},me=()=>{var H,W,J,Z;const[t,o]=l.useState(F),[m,i]=l.useState(!1),[p,n]=l.useState(""),[y,P]=l.useState([]),[I,_]=l.useState([]),[k,U]=l.useState(!0),[h,L]=l.useState(!1),[c,G]=l.useState(null),E=l.useCallback(async()=>{n("");try{const s=await fetch(`${w}/api/products?limit=1000&status=Active&status=Inactive`);if(!s.ok)throw new Error(`Failed to fetch products: ${s.statusText}`);const r=await s.json();P(r.results||[])}catch(s){console.error("Error fetching products:",s),n(`Error: Could not load products. ${s.message}`),P([])}},[]),T=l.useCallback(async()=>{n("");try{const s=await fetch(`${w}/api/orders`);if(!s.ok)throw new Error(`Failed to fetch orders: ${s.statusText}`);const r=await s.json();_(r||[])}catch(s){console.error("Error fetching orders:",s),n(`Error: Could not load orders. ${s.message}`),_([])}},[]);l.useEffect(()=>{U(!0),Promise.all([E(),T()]).catch(s=>console.error("Error during initial data load:",s)).finally(()=>U(!1))},[E,T]);const A=l.useCallback(()=>{o(F),L(!1);const s=document.getElementById("file-upload");s&&(s.value=null),n(""),window.scrollTo({top:0,behavior:"smooth"})},[]),u=l.useCallback(s=>{const{name:r,value:a,type:d,checked:x}=s.target;o(v=>({...v,[r]:d==="checkbox"?x:a}))},[]),ue=l.useCallback(s=>{const r=parseFloat(s.target.value)||0;o(a=>({...a,price_egp:r}))},[]),xe=l.useCallback(s=>{const r=parseInt(s.target.value,10)||0;o(a=>({...a,stock:r}))},[]),pe=l.useCallback(s=>{const r=s.target.value.split(",").map(a=>a.trim()).filter(Boolean);o(a=>({...a,scents:r}))},[]),he=l.useCallback((s,r)=>{const a=r.split(",").map(d=>d.trim()).filter(Boolean);o(d=>{const x=[...d.bundleItems];return x[s].allowedScents=a,{...d,bundleItems:x}})},[]),ge=l.useCallback(s=>{const r=Array.from(s.target.files);o(a=>({...a,selectedFiles:r.slice(0,5)}))},[]),be=l.useCallback(s=>{o(r=>({...r,selectedFiles:r.selectedFiles.filter((a,d)=>d!==s)}))},[]),V=l.useCallback((s,r,a)=>{o(d=>{const x=[...d.bundleItems];return x[s][r]=a,{...d,bundleItems:x}})},[]),fe=l.useCallback(()=>{t.bundleItems.length<10&&o(s=>({...s,bundleItems:[...s.bundleItems,{...S,subProductName:`Item ${s.bundleItems.length+1}`}]}))},[t.bundleItems.length]),ye=l.useCallback(s=>{o(r=>({...r,bundleItems:r.bundleItems.filter((a,d)=>d!==s)}))},[]),je=async s=>{var v,X,K;if(s.preventDefault(),i(!0),n(""),!h&&t.selectedFiles.length===0){n("Error: Please upload at least one image for new products."),i(!1);return}if(!t.category){n("Error: Category is required."),i(!1);return}if(t.productType==="Single"&&!t.name_en.trim()){n("Error: Name (English) is required for Single products."),i(!1);return}if(t.productType==="Bundle"&&!t.bundleName.trim()){n("Error: Bundle Name is required for Bundles."),i(!1);return}let r={productType:t.productType,category:t.category,price_egp:t.price_egp,stock:t.stock,status:t.status,featured:t.featured,scents:t.scents.join(", "),size:t.size,formattedDescription:t.formattedDescription,burnTime:t.burnTime,wickType:t.wickType,coverageSpace:t.coverageSpace};t.productType==="Single"?(r.name_en=t.name_en,r.description_en=t.description_en):(r.bundleName=t.bundleName,r.bundleDescription=t.bundleDescription,r.bundleItems=t.bundleItems.map(g=>({...g,allowedScents:g.allowedScents.join(", ")})),delete r.scents,delete r.size,delete r.formattedDescription,delete r.burnTime,delete r.wickType,delete r.coverageSpace);const a=new FormData;t.selectedFiles.forEach(g=>{a.append("productImages",g)}),a.append("productData",JSON.stringify(r));const d=h?`${w}/api/products/${t._id}`:`${w}/api/products`,x=h?"PUT":"POST";try{const g=await fetch(d,{method:x,body:a}),N=await g.json();if(g.ok&&N.success){const Ce=h?"updated":"created",Se=((v=N.product)==null?void 0:v.name_en)||((X=N.product)==null?void 0:X.bundleName)||((K=N.product)==null?void 0:K.name)||"product";n(`Success! Product "${Se}" ${Ce}.`),A(),await E()}else n(`Error ${h?"updating":"creating"} product: ${N.message||N.error||`Server responded with status ${g.status}`}`),console.error("API Error:",N)}catch(g){n(`Network Error: ${g.message}. Please check connection or API URL.`),console.error("Submission Error:",g)}finally{i(!1)}},Ne=s=>{const r=(s.scents||"").split(",").map(x=>x.trim()).filter(Boolean),a=(s.bundleItems||[]).map(x=>({...x,allowedScents:(x.allowedScents||"").split(",").map(v=>v.trim()).filter(Boolean)}));o({...F,...s,_id:s._id,scents:r,bundleItems:a,selectedFiles:[],imagePaths:s.imagePaths||[]}),L(!0),n("Editing product. Upload images only to ADD new ones.");const d=document.getElementById("product-form-section");d&&d.scrollIntoView({behavior:"smooth"})},we=async(s,r)=>{if(window.confirm(`Are you sure you want to delete "${r}"? This cannot be undone.`)){i(!0),n("");try{const a=await fetch(`${w}/api/products/${s}`,{method:"DELETE"}),d=await a.json();a.ok&&d.success?(n(`Success! Product "${r}" deleted.`),await E(),t._id===s&&A()):(n(`Error deleting product: ${d.message||d.error||`Status ${a.status}`}`),console.error("API Error:",d))}catch(a){n(`Network Error: ${a.message}.`),console.error("Delete Error:",a)}finally{i(!1)}}},ve=async(s,r)=>{if(window.confirm(`Update order ${s.slice(-6)} status to "${r}"?`)){i(!0);try{const a=await fetch(`${w}/api/orders/${s}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})}),d=await a.json();a.ok&&d.order?(console.log(`Order ${s.slice(-6)} status updated.`),await T()):(n(`Error updating order: ${d.message||d.error||`Status ${a.status}`}`),console.error("API Error:",d))}catch(a){n(`Network Error: ${a.message}.`),console.error("Order Update Error:",a)}finally{i(!1)}}},ke=s=>G(s),B=()=>G(null),j=t.productType==="Bundle";return e.jsxs("div",{className:"min-h-screen bg-gray-100 p-4 sm:p-8 font-sans",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsxs("div",{id:"product-form-section",className:"bg-white shadow-xl rounded-2xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6 border-b pb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 flex items-center",children:[e.jsx(ce,{className:"w-6 h-6 mr-2 text-indigo-600"}),h?"Edit Product":"Add New Product"]}),h&&e.jsx("button",{onClick:A,className:"text-sm font-medium text-indigo-600 hover:text-indigo-800 px-3 py-1 border border-indigo-200 rounded hover:bg-indigo-50",children:"Cancel Edit / Add New"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:h?`Updating product ID: ...${(H=t._id)==null?void 0:H.slice(-6)}. Upload images to ADD to existing.`:"Define core properties, bundle items if applicable. Uses Cloudinary."}),p&&e.jsx("div",{className:`p-3 mb-6 rounded-lg font-medium text-sm border ${p.startsWith("Error")?"bg-red-50 text-red-700 border-red-300":"bg-green-50 text-green-700 border-green-300"}`,children:p}),e.jsxs("form",{onSubmit:je,className:"space-y-8",children:[e.jsxs("fieldset",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-200",children:[e.jsxs("legend",{className:"block text-lg font-semibold text-indigo-800 mb-3",children:[e.jsx(R,{className:"w-5 h-5 inline mr-2 align-text-bottom"})," Product Type"]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer bg-white p-3 rounded-xl shadow-sm transition hover:shadow-md",children:[e.jsx("input",{type:"radio",name:"productType",value:"Single",checked:t.productType==="Single",onChange:u,className:"h-5 w-5 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 font-medium text-gray-700",children:"Single Product"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer bg-white p-3 rounded-xl shadow-sm transition hover:shadow-md",children:[e.jsx("input",{type:"radio",name:"productType",value:"Bundle",checked:t.productType==="Bundle",onChange:u,className:"h-5 w-5 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 font-medium text-gray-700",children:"Product Bundle"})]})]})]}),e.jsxs("fieldset",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 border-t pt-6",children:[e.jsx("legend",{className:"md:col-span-2 text-xl font-bold text-gray-800 mb-4",children:" General Details "}),j?e.jsxs("div",{className:"col-span-1",children:[e.jsxs("label",{htmlFor:"bundleName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Bundle Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"bundleName",id:"bundleName",value:t.bundleName,onChange:u,required:!0,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border"})]}):e.jsxs("div",{className:"col-span-1",children:[e.jsxs("label",{htmlFor:"name_en",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name (English) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name_en",id:"name_en",value:t.name_en,onChange:u,required:!0,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",id:"category",value:t.category,onChange:u,required:!0,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border bg-white",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Candles",children:"Candles"}),e.jsx("option",{value:"Freshener",children:"Freshener"}),e.jsx("option",{value:"Diffuser",children:"Diffuser"}),e.jsx("option",{value:"Gift Set",children:"Gift Set"})," "]})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-x-3 pt-3",children:[" ",e.jsx("input",{type:"checkbox",name:"featured",id:"featured",checked:t.featured,onChange:u,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"featured",className:"block text-sm font-medium text-gray-700",children:"Featured Product (Show on Homepage)"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",id:"status",value:t.status,onChange:u,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border bg-white",children:[e.jsx("option",{value:"Active",children:"Active (Visible on site)"}),e.jsx("option",{value:"Inactive",children:"Inactive (Hidden from site)"})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsxs("label",{htmlFor:"price_egp",className:"block text-sm font-medium text-gray-700 mb-1",children:["Price (EGP) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"price_egp",id:"price_egp",value:t.price_egp,onChange:ue,required:!0,min:"0",step:"0.01",className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsxs("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-1",children:["Stock Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"stock",id:"stock",value:t.stock,onChange:xe,required:!0,min:"0",className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border"})]}),!j&&e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"size",className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),e.jsx("input",{type:"text",name:"size",id:"size",value:t.size,onChange:u,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:'e.g., "200 gm", "Small"'})]}),!j&&e.jsxs("div",{className:"md:col-span-2",children:[" ",e.jsx("label",{htmlFor:"scents",className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Scents (Comma separated)"}),e.jsx("input",{type:"text",name:"scents",id:"scents",value:t.scents.join(", "),onChange:pe,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:"e.g., Lavender, Vanilla, Rose"})]})]}),!j&&e.jsxs("fieldset",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-4 border-t pt-6",children:[e.jsx("legend",{className:"md:col-span-3 text-xl font-bold text-gray-800 mb-4",children:" Product Specifications "}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"burnTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Burn Time"}),e.jsx("input",{type:"text",name:"burnTime",id:"burnTime",value:t.burnTime,onChange:u,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:"e.g., 40-45 hours"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wickType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Wick Type"}),e.jsx("input",{type:"text",name:"wickType",id:"wickType",value:t.wickType,onChange:u,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:"e.g., Cotton, Wood"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"coverageSpace",className:"block text-sm font-medium text-gray-700 mb-1",children:"Coverage Space"}),e.jsx("input",{type:"text",name:"coverageSpace",id:"coverageSpace",value:t.coverageSpace,onChange:u,className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:"e.g., 15-20 m2 bedroom"})]})]}),e.jsxs("fieldset",{className:"space-y-4 border-t pt-6",children:[e.jsx("legend",{className:"text-xl font-bold text-gray-800 mb-4",children:" Description "}),j?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bundleDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bundle Description"}),e.jsx("textarea",{name:"bundleDescription",id:"bundleDescription",value:t.bundleDescription,onChange:u,rows:"3",className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border"})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description_en",className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description (English)"}),e.jsx("textarea",{name:"description_en",id:"description_en",value:t.description_en,onChange:u,rows:"3",className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:"A concise summary..."})]}),!j&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"formattedDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Detailed/Formatted Description (Optional)"}),e.jsx("textarea",{name:"formattedDescription",id:"formattedDescription",value:t.formattedDescription,onChange:u,rows:"5",className:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 border",placeholder:"Use basic HTML for bold, line breaks etc..."})]})]}),e.jsxs("fieldset",{className:"border-t pt-6",children:[e.jsxs("legend",{className:"text-xl font-bold text-gray-800 mb-4",children:["Images (Max 5 total) ",!h&&e.jsx("span",{className:"text-red-500",children:"* Required for new"})]}),h&&t.imagePaths&&t.imagePaths.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Images:"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.imagePaths.map((s,r)=>e.jsx("div",{className:"relative group w-20 h-20 rounded-lg overflow-hidden border border-gray-200",children:e.jsx("img",{src:s,alt:`Current ${r+1}`,className:"w-full h-full object-cover"})},r))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new images below to add more."})]}),e.jsx("input",{type:"file",id:"file-upload",multiple:!0,accept:"image/*",onChange:ge,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:" High-res JPG/PNG recommended. First image is the main display image. "}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:t.selectedFiles.map((s,r)=>e.jsxs("div",{className:"relative group w-20 h-20 rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:`Preview ${r+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>be(r),className:"absolute top-0 right-0 p-1 bg-red-600 text-white rounded-bl-lg opacity-0 group-hover:opacity-100 transition duration-300",title:"Remove image",children:e.jsx(D,{className:"w-3 h-3"})})]},r))})]}),j&&e.jsxs("fieldset",{className:"bg-yellow-50 p-6 rounded-xl border border-yellow-200 space-y-6",children:[e.jsxs("legend",{className:"text-xl font-bold text-yellow-800 flex items-center",children:[e.jsx(R,{className:"w-5 h-5 mr-2"})," Bundle Items (Up to 10)"]}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Define the components and their scent options."}),t.bundleItems.map((s,r)=>e.jsxs("div",{className:"p-4 border border-yellow-300 rounded-lg bg-white shadow-sm relative",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex justify-between items-center",children:["Item #",r+1,t.bundleItems.length>1&&e.jsx("button",{type:"button",onClick:()=>ye(r),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 transition",title:"Remove Item",children:e.jsx(D,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:s.subProductName,onChange:a=>V(r,"subProductName",a.target.value),required:!0,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 text-sm border focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Size"}),e.jsx("input",{type:"text",value:s.size,onChange:a=>V(r,"size",a.target.value),required:!0,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 text-sm border focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 200 gm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Allowed Scents (Comma Separated)"}),e.jsx("input",{type:"text",value:s.allowedScents.join(", "),onChange:a=>he(r,a.target.value),required:!0,className:"block w-full rounded-md border-gray-300 shadow-sm p-2 text-sm border focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Rose, Vanilla"})]})]})]},r)),t.bundleItems.length<10&&e.jsxs("button",{type:"button",onClick:fe,className:"w-full flex items-center justify-center px-4 py-2 border border-dashed border-yellow-400 text-sm font-medium rounded-md text-yellow-800 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition",children:[e.jsx(oe,{className:"w-4 h-4 mr-1"})," Add Bundle Item"]})]}),e.jsxs("div",{className:"pt-6 border-t mt-8",children:[" ",e.jsx("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-xl shadow-lg text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-5 h-5 mr-3 animate-spin"})," Submitting..."]}):h?"Update Product":"Submit Product / Bundle"})]})]})]}),k&&e.jsx("p",{className:"text-center text-gray-600 py-10",children:"Loading management sections..."}),!k&&e.jsxs("div",{id:"product-list-section",className:"bg-white shadow-xl rounded-2xl p-6 md:p-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Manage Products"}),y.length===0?e.jsx("p",{className:"text-gray-500",children:"No products found. Add one using the form above!"}):e.jsx("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Image"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Price (EGP)"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Stock"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:y.map(s=>{var r,a;return e.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("img",{src:((r=s.imagePaths)==null?void 0:r[0])||"./images/placeholder.jpg",alt:"",className:"w-10 h-10 object-cover rounded"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap",children:s.name_en||s.bundleName||s.name||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:s.productType}),e.jsx("td",{className:"px-4 py-3",children:(a=s.price_egp)==null?void 0:a.toFixed(2)}),e.jsx("td",{className:"px-4 py-3",children:s.stock}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>Ne(s),title:"Edit",className:"text-indigo-600 hover:text-indigo-900 p-1 hover:bg-indigo-50 rounded",children:e.jsx(de,{size:16})}),e.jsx("button",{onClick:()=>we(s._id,s.name_en||s.bundleName||s.name),title:"Delete",className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",children:e.jsx(ie,{size:16})})]})]},s._id)})})]})})]}),!k&&e.jsxs("div",{id:"order-list-section",className:"bg-white shadow-xl rounded-2xl p-6 md:p-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Manage Orders"}),I.length===0?e.jsx("p",{className:"text-gray-500",children:"No orders found yet."}):e.jsx("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Order ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Date"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Total (EGP)"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:I.map(s=>{var r,a;return e.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap truncate",style:{maxWidth:"100px"},title:s._id,children:["...",s._id.slice(-6)]}),e.jsx("td",{className:"px-4 py-3",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:((r=s.customerInfo)==null?void 0:r.name)||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:(a=s.totalAmount)==null?void 0:a.toFixed(2)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{value:s.status,onChange:d=>ve(s._id,d.target.value),className:`p-1 rounded text-xs border focus:outline-none focus:ring-1 focus:ring-indigo-500 ${s.status==="Delivered"?"bg-green-100 text-green-800 border-green-300":s.status==="Shipped"?"bg-blue-100 text-blue-800 border-blue-300":s.status==="Processing"?"bg-yellow-100 text-yellow-800 border-yellow-300":s.status==="Cancelled"?"bg-red-100 text-red-800 border-red-300":"bg-gray-100 text-gray-800 border-gray-300"}`,disabled:m,children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>ke(s),title:"View Details",className:"text-gray-500 hover:text-indigo-600 p-1 hover:bg-gray-100 rounded",children:e.jsx(le,{size:16})})})]},s._id)})})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full flex items-center justify-center z-50 p-4",onClick:B,children:e.jsxs("div",{className:"relative mx-auto p-6 border w-full max-w-2xl shadow-lg rounded-md bg-white",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Order Details (...",c._id.slice(-6),")"]}),e.jsxs("button",{onClick:B,className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",children:[e.jsx(D,{size:20}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("div",{className:"text-sm space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:[" ",e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(c.createdAt).toLocaleString()]})}),e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",c.status]})}),e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",c.customerInfo.name]})}),e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",c.customerInfo.email]})}),e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",c.customerInfo.phone]})}),e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Payment:"})," ",c.paymentMethod]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",c.customerInfo.address,", ",c.customerInfo.city]})}),c.customerInfo.notes&&e.jsx("div",{className:"md:col-span-2",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",c.customerInfo.notes]})})]}),e.jsx("hr",{}),e.jsx("p",{className:"font-semibold mt-4",children:e.jsx("strong",{children:"Items:"})}),e.jsx("ul",{className:"list-disc list-inside space-y-1 pl-1",children:c.items.map((s,r)=>{var a;return e.jsxs("li",{children:[s.name," x ",s.quantity," @ ",(a=s.price)==null?void 0:a.toFixed(2)," EGP",s.customization&&s.customization.length>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[" (",s.customization.join(", "),")"]})]},r)})}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 text-right",children:[e.jsx("p",{children:"Subtotal:"}),e.jsxs("p",{children:[(W=c.subtotal)==null?void 0:W.toFixed(2)," EGP"]}),e.jsx("p",{children:"Shipping:"}),e.jsxs("p",{children:[(J=c.shippingFee)==null?void 0:J.toFixed(2)," EGP"]}),e.jsx("p",{className:"font-bold",children:"Total:"}),e.jsxs("p",{className:"font-bold",children:[(Z=c.totalAmount)==null?void 0:Z.toFixed(2)," EGP"]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:B,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"Close"})})]})})]})," "]})};f.AdminProductUploader=me,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
